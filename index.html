<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ATL 1st Peach Padel Tournament 2025</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: url("padel-court.jpg") no-repeat center center fixed;
        background-size: cover;
      }
      .overlay {
        background-color: rgba(0, 0, 0, 0.5);
        min-height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 2rem;
      }
      .registration-card {
        background-color: #fff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }
      .card-header {
        background-color: #90c358;
        color: #fff;
        text-align: center;
        padding: 1.5rem 1rem;
      }
      .card-header h2 {
        margin: 0;
        font-size: 1.75rem;
      }
      .card-body {
        padding: 2rem;
      }
      .form-label {
        font-weight: 500;
      }
      /* Green (active) button style */
      .btn-accent {
        background-color: #90c358;
        border: none;
      }
      .btn-accent:hover {
        background-color: #7cb44b;
      }
      /* Gray (disabled) button style */
      .btn-disabled {
        background-color: #6c757d; /* Dark gray */
        border: none;
        cursor: not-allowed;
      }
      .tournament-details li {
        margin-bottom: 0.25rem;
      }
    </style>
  </head>
  <body>
    <div class="overlay">
      <div class="container">
        <div class="row justify-content-center">
          <div class="col-md-8 col-lg-6">
            <div class="card registration-card">
              <div class="card-header">
                <h2>ATL 1st Peach Padel Tournament 2025</h2>
                <p class="mb-0">Show your skills at our first padel tournament this year!</p>
              </div>
              <div class="card-body">
                <form id="registration-form">
                  <!-- Team Name (Required) -->
                  <div class="mb-3">
                    <label for="teamName" class="form-label">Team Name <span class="text-danger">*</span></label>
                    <input type="text" class="form-control" id="teamName" name="teamName" required />
                  </div>
                  
                  <!-- Email (Required) -->
                  <div class="mb-3">
                    <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                    <input type="email" class="form-control" id="email" name="email" required />
                  </div>
                  
                  <!-- Phone Number (Optional) -->
                  <div class="mb-3">
                    <label for="phone" class="form-label">Phone Number</label>
                    <input type="tel" class="form-control" id="phone" name="phone" placeholder="e.g., 123-456-7890" />
                  </div>
                  
                  <!-- Player 1 (Optional) -->
                  <div class="mb-3">
                    <label for="player1" class="form-label">Player 1</label>
                    <input type="text" class="form-control" id="player1" name="player1" />
                  </div>
                  
                  <!-- Player 2 (Optional) -->
                  <div class="mb-3">
                    <label for="player2" class="form-label">Player 2</label>
                    <input type="text" class="form-control" id="player2" name="player2" />
                  </div>

                  <!-- Tournament Details -->
                  <div class="mt-4">
                    <h5 class="fw-bold">Tournament Details</h5>
                    <ul class="list-unstyled tournament-details">
                      <li><strong>Date:</strong> March 1st, 2025 @ 12PM</li>
                      <li><strong>Location:</strong> PATL, 3110 Presidential Dr, Atlanta, GA 30340</li>
                      <li><strong>Prize Pool:</strong> $1,000</li>
                      <li><strong>Registration Fee:</strong> $60 / person</li>
                    </ul>
                  </div>

                  <!-- Register & Pay Buttons -->
                  <div class="d-grid mt-4">
                    <!-- Gray, non-clickable button (always visible) -->
                    <button
                      type="button"
                      id="disabledButton"
                      class="btn btn-disabled btn-lg text-white"
                    >
                      Register & Pay
                    </button>
                    
                    <!-- Green, clickable button (hidden by default) -->
                    <button
                      type="submit"
                      id="activeButton"
                      class="btn btn-accent btn-lg text-white mt-2"
                      style="display: none;"
                    >
                      Register & Pay
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Client-Side JavaScript -->
    <script>
      const form = document.getElementById('registration-form');
      const teamNameInput = document.getElementById('teamName');
      const emailInput = document.getElementById('email');
      const disabledButton = document.getElementById('disabledButton');
      const activeButton = document.getElementById('activeButton');

      // Check required fields and toggle button visibility
      function validateForm() {
        const teamName = teamNameInput.value.trim();
        const email = emailInput.value.trim();
        
        // If both fields have values, hide the gray button & show the green one
        if (teamName && email) {
          disabledButton.style.display = 'none';
          activeButton.style.display = 'block';
        } else {
          // Otherwise, show the gray button & hide the green one
          disabledButton.style.display = 'block';
          activeButton.style.display = 'none';
        }
      }

      // Listen for user input on required fields
      teamNameInput.addEventListener('input', validateForm);
      emailInput.addEventListener('input', validateForm);

      // Handle form submission
      form.addEventListener('submit', function(e) {
        e.preventDefault(); // Prevent default form submission
        
        // Final check in case user manipulated the DOM
        const teamName = teamNameInput.value.trim();
        const email = emailInput.value.trim();
        if (!teamName || !email) {
          alert('Please fill in all required fields (Team Name and Email).');
          return;
        }
        
        // Prepare data to send
        const formData = {
          source: "form",
          teamName: teamName,
          email: email,
          phone: document.getElementById('phone').value.trim(),
          player1: document.getElementById('player1').value.trim(),
          player2: document.getElementById('player2').value.trim()
        };
        
        // Send registration data to Google Apps Script Web App
        fetch('https://script.google.com/macros/s/AKfycbyfFE6VLhQgIvgCrhY7W5bgrM9-vABDC9gdC1lqt6AlwKNbvDr5-U7qASP-jSYxWwE/exec', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData)
        })
        .then(response => {
          if (response.ok) {
            // After form data is recorded, redirect to Stripe payment
            window.location.href = "https://buy.stripe.com/5kA3fm0m84zr2as144";
          } else {
            alert('Data submission failed. Please try again.');
          }
        })
        .catch(error => {
          console.error('Error:', error);
          alert('An error occurred. Please try again.');
        });
      });
    </script>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
